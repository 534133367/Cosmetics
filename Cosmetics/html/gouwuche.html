<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../css/common.css">
		<link rel="stylesheet" type="text/css" href="../css/gouwuche.css" />
		<link rel="stylesheet" type="text/css" href="../css/homepage.css" />
	</head>
	<body>
		<div id="header">
			<div class="head content">
				<ul class="right">
					<li>
						<a href="##" class="a1 aa"><span>中文简体</span><img src="../img/icon4.gif" /></a>
						<div class="Language">
							<h1>选择语言</h1>
							<div class="_box">
								<a href="##">English</a>
								<a href="##">中文简体</a>
								<a href="##">Korean</a>
							</div>
						</div>
					</li>
					<li>
						<a href="##" class="a2 aa"><i></i><span>CNY ￥</span><img src="../img/icon4.gif" /></a>
						<div class="home">
							<h1>选择货币</h1>
							<ul class="home_box">
								<li>
									<a href="##"><i></i><span>AED Dh</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>AUD A$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>BRL R$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>CAD C$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>CNY ￥</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>EUR €</span></a>
								</li>
								<li>
									<a href="##" class="China"><i></i><span>JPY ￥</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>USD $</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>KZT KZT</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>MOP MOP$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>MYR RM</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>MNT ₮</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>NZD NZ$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>NOK Nkr</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>PHP ₱</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>RUB Руб</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>SAR SR</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>SGD S$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>TWD NT$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>THB ฿</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>TRY TL</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>GBP ￡</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>HKD H$</span></a>
								</li>
								<li>
									<a href="##"><i></i><span>VND ₫</span></a>
								</li>
							</ul>
						</div>
						
					</li>
					<li>
						<a href="##" class="a3 aa"><span>配送国家或地区</span><i style="font-weight: 900;color: black;">  CHINA</i><img src="../img/icon4.gif" /></a>
						<div class="bigbox">
							<div class="send">
								<a href="##" class="a3 aa"><span>配送国家或地区</span><i style="font-weight: 900;color: black;">  CHINA</i><img src="../img/icon3.gif" /></a>
							</div>
							<div class="chose">
								<h1>选择配送国家或地区</h1>
								<ul class="bottom">
									<li>SOUTH KOREA</li>
									<li>ALBANIA</li>
									<li>ALGERIA</li>
									<li>ARGENTINA</li>
									<li>ARMENIA</li>
									<li>AUSTRALIA</li>
									<li>AUSTRIA</li>
									<li>AZERBAIJAN</li>
									<li>BAHRAIN</li>
									<li>BANGLADESH</li>
									<li>BELARUS</li>
									<li>BELGIUM</li>
									<li>BHUTAN</li>
									<li>BOSNIA &HERZEGOVINA</li>
									<li>BRAZIL</li>
									<li>BRUNEI DARUSSALAM</li>
									<li>BULGARIA</li>
									<li>CZECH</li>
									<li>CHILE</li>
									<li>COSTA RICA</li>
									<li>CROATIA</li>
									<li>CYPRUS</li>
									<li>CUBA</li>
									<li>DJIBOUTI</li>
									<li>DOMINICAN REP.</li>
									<li>ECUADOR</li>
									<li>EGYPT</li>
									<li>ERITREA</li>
									<li>ESTONIA</li>
									<li>ETHIOPIA</li>
									<li>FIJI</li>
									<li>FINLAND</li>
									<li>FRANCE</li>
 									<li>GERMANY</li>
									<li>GREECE</li>
									<li>HONG KONG</li>
									<li>HUNGARY</li>
									<li>INDIA</li>
									<li>INDONESIA</li>
									<li>IRAN</li>
									<li>IRELANDA</li>
									<li>ISRAEL</li>
									<li>JAPAN</li>
									<li>JORDAN</li>
									<li>KAZAKHSTAN</li>
									<li>KENYA</li>
									<li>LAOS</li>
									<li>LATVIA</li>
    								<li>LUXEMBURG</li>
									<li>MACAO</li>
									<li>MACEDONIA</li>
									<li>MALAYSIA</li>
 									<li>MALDIVES</li>
									<li>MAURITIUS</li>
									<li>MEXICOKONG</li>
									<li>NEPAL</li>
									<li>NETHERLANDS</li>
									<li>NETHERLANDS ANTILES</li>
									<li>NEW ZEALAND</li>
									<li>NIGERIA</li>
									<li>NORWAY</li>
									<li>OMAN</li>
									<li>PAKISTAN</li>
								</ul>
							</div>
						</div>
						
					</li>
				</ul>
				<ul class="left">
					<li>
						<a href="login.html">登陆</a>
						<span></span>
					</li>
					<li>
						<a href="register.html">注册会员</a>
						<span></span>
					</li>
					<li class="one">
						<a href="##">我的11STREET</a>
						<i></i>
						<span></span>
						<ul>
							<li>
								<a href="##">订单/配送查询</a>
							</li>
							<li>
								<a href="##">取消/退货</a>
							</li>
							<li>
								<a href="##">优惠券</a>
							</li>
							<li>
								<a href="##">货物等级补偿</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="##">购物车</a>
						<span></span>
					</li>
					<li>
						<a href="##">客服中心</a>
					</li>
				</ul>
			</div>
		</div>
		<div id="search_wrap">
			<div class="search content">
				<div class="logo_left">
					<a href="#" title="ELEVENT STREET">ELEVENT STREET</a>
				</div>
				<form class="look">
					<input type="text" placeholder="请输入关键字" id="input">
					<input type="submit" id="sub" >
					<img src="../img/search1.gif" title="搜索"/>
					<ul class="show"></ul>
				</form>
				<div class="logo_right">
					<a href="#" title="国际配送指南">国际配送指南</a>
				</div>
			</div>
		</div>
		<div id="back_wrap">
			<div class="back content">
				<ul class="nav">
					<li></li>
					<li>
						<a href="##" class="a" data-id="1">品牌服饰</a>
						<div class="in">
							<h2>品牌服饰</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="2">服饰/鞋包</a>
						<div class="in">
							<h2>服饰/鞋包</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="3">美妆</a>
						<div class="in">
							<h2>美妆</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="4">运动/汽车</a>
						<div class="in">
							<h2>运动/汽车</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="5">食品</a>
						<div class="in">
							<h2>食品</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="6">母婴/玩具</a>
						<div class="in">
							<h2>母婴/玩具</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="7">日用/保健</a>
						<div class="in">
							<h2>日用/保健</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="8">家具/建材</a>
						<div class="in">
							<h2>家具/建材</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="9">数码/家电/电脑</a>
						<div class="in">
							<h2>数码/家电/电脑</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="10">图书/娱乐/宠物</a>
						<div class="in">
							<h2>图书/娱乐/宠物</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
					<li>
						<a href="##" class="a" data-id="11">海外直购</a>
						<div class="in">
							<h2>海外直购</h2>
							<a href="##">品牌女装</a>
						</div>
					</li>
				</ul>
				<ul class="img">
					<li><img src="../img/A1.jpg"/></li>
					<li><img src="../img/A2.jpg"/></li>
					<li><img src="../img/A3.jpg"/></li>
					<li><img src="../img/A4.jpg"/></li>
					<li><img src="../img/A5.png"/></li>
				</ul>
			</div>
		</div>
		<div id="home">
			<div class="home content">
				<a href="homepage.html">主页<img src="../img/xiangyou.gif"/></a>
			</div>
		</div>
		<div id="cart_wrap">
			<div class="cart content">
				<div class="head">
					<input type="checkbox" class="check1 check" checked="checked">
					<span>商品/购买选项</span>
					<span>数量</span>
					<span>单价</span>
					<span>运费</span>
					<span>金额</span>
					<span>节省</span>
					<span>操作</span>
				</div>
				<div id="maxbox">
					<!--<div class="list">
					<div class="content box">
						<input type="checkbox" class="check2 check">
						<img src="../img/shop12.jpg" />
						<span>是多久啊大家都觉得静安寺大街上打死觉得撒娇的撒娇打死的撒低级</span>
					</div>
					<div class="number box">
						<input type="text" class="int" value="1">
						<div class="btn">
							<button class="top_btn"></button>
							<button class="bottom_btn"></button>
						</div>
					</div>
					<div class="price box">
						<span>￦22,000</span><br />
						<span>(￥124.28)</span>
					</div>
					<div class="send box">
						<p>韩国内免费运送</p>
						<a href="##">oin ete ch</a><br />
						<span>结算</span>
					</div>
					<div class="all box">
						<span>￦22,000</span><br />
						<span>(￥124.28)</span>
					</div>
					<div class="all box">
						<span>￦0</span><br />
						<span>(￥0.00)</span>
					</div>
					<div class="operation box">
						<a href="##">加入收藏夹</a><br />
						<a href="##">删除</a><br />
						<a href="##">结算</a>
					</div>
				</div>-->
				</div>
				
				<div class="footer">
					<input type="checkbox" id="all2" /><label for="all">全选</label>
					<a href="#" class="shan">删除选中的商品</a>
					<a href="#" class="kan">移到我的关注</a>
					<a href="#" class="account">去结算</a>
					<div class="sumprice">
						<span class="fi">已选择<i class="much" style="color: #e4393c;font-size: 12px;">0</i>件商品  </span>
						<div class="_box">
							<span>总价 :  </span><span class="red">￦0</span><br />						
							<span class="tr">已节省 : - ￥0.00</span>     
						</div>
					</div>	
				</div>
			</div>
		</div>
		<img src="../img/foot.jpg" id="img">
	</body>
</html>
<script src="../js/pool.js"></script>
<script src="../js/ajax.js"></script>
<script src="../js/head.js"></script>
<script src="../js/search.js"></script>
<script src="../js/count.js"></script>
<script src="../js/func.js"></script>
<script>
	new cc3();
	//二级导航
	ajax("get","../json/nav.json",{},function(data){
		var li=document.getElementById("back_wrap").getElementsByClassName("nav")[0].getElementsByTagName("li");
		var ul=document.getElementById("back_wrap").getElementsByClassName("nav")[0];
		var box=document.getElementById("back_wrap");
		var divbox = document.getElementsByClassName("in");
		var t=0;
		var back=document.getElementById("back_wrap");
		var num={};
		ul.onmouseover=function(){
			box.style.overflow="initial";
			this.onmouseout=function(){
				box.style.overflow="hidden";
			}
		}
		back.onmouseover=function(e){
			var e=e||event;
			var target=e.target||e.srcElement;
				if(target.tagName=="A" && target.className=="a"){
					var d=target.getAttribute("data-id");
					var n=num[d];
					if(!n){
						n=1;
						num[d]=n;
						for(var i=0;i<data.length;i++){
							if(d==data[i].id){
								for(var k=0;k<data[i].num.length;k++){
									var oDiv = document.createElement('a');
									oDiv.href="#";
									oDiv.innerHTML=data[i].num[k];
									divbox[i].appendChild(oDiv);
								}
							}
						}
					}else{
						n++;
						num[d]=n;
					}
				}
		}
	})
	
	//商品结算展示
	ajax("get","../json/all.json",{},function(data){
		
		var maxbox=document.getElementById("maxbox"); 
		
		var arr;
		var str="";
		var a1=0;
		var n=0;
		var cookies = document.cookie.split('; ');
			for(var i=0;i<cookies.length;i++){
			var arr2 = cookies[i].split('=');
			if(arr2[0] === 'init'){
				arr = JSON.parse(arr2[1]);
			}
		}
		
		for(var i=0;i<arr.length;i++){
			a1+=ff(arr[i].money1);
			n+=Number(arr[i].num);
			str+=`<div class="list" data-id="${arr[i].id} ${arr[i].atr}">
					<div class="content box">
						<input type="checkbox" class="check2 check" checked="checked">
						<img src="${arr[i].img}" />
						<span>${arr[i].content}</span>
					</div>
					<div class="number box">
						<input type="text" class="int" value="${arr[i].num}">
						<div class="btn">
							<button class="top_btn"></button>
							<button class="bottom_btn"></button>
						</div>
					</div>
					<div class="price box">
						<span>${arr[i].price1}</span><br />
						<span>${arr[i].price2}</span>
					</div>
					<div class="send box">
						<p>韩国内免费运送</p>
						<a href="##">oin ete ch</a><br />
						<span>结算</span>
					</div>
					<div class="all box">
						<span class="money1">${arr[i].money1}</span><br />
						<span class="money2">${arr[i].money2}</span>
					</div>
					<div class="all box">
						<span>￦0</span><br />
						<span>(￥0.00)</span>
					</div>
					<div class="operation box">
						<a href="##">加入收藏夹</a><br />
						<a href="##" class="delmove">删除</a><br />
						<a href="##">结算</a>
					</div>
				</div>`
				
			
		}
		maxbox.innerHTML=str;
		
		var _priceall=document.getElementById("cart_wrap").getElementsByClassName("footer")[0].getElementsByClassName("red")[0];
		var _num=document.getElementById("cart_wrap").getElementsByClassName("footer")[0].getElementsByTagName("i")[0];
		var move=maxbox.getElementsByClassName("delmove");
		var money1=maxbox.getElementsByClassName("money1");
		var money2=maxbox.getElementsByClassName("money2");
		var check=maxbox.getElementsByClassName("check");
		var top_check=document.getElementById("cart_wrap").getElementsByClassName("head")[0].getElementsByClassName("check")[0];
		var bottom_check=document.getElementById("all2");
		var value_num=document.getElementById("maxbox").getElementsByClassName("int");
		var _inpx=maxbox.getElementsByClassName("int");
		var _list=maxbox.getElementsByClassName("list");
		
		_priceall.innerHTML=money();
		_num.innerHTML=n;
		
		//checkbox；
		
		top_check.onclick=function(){
			if(top_check.checked){
				for(var i=0;i<check.length;i++){
					check[i].checked=true;
				}	
				bottom_check.checked=false;
				_priceall.innerHTML=money();
				_num.innerHTML=_num2();
			}else{
				for(var i=0;i<check.length;i++){
					check[i].checked=false;
				}
				_priceall.innerHTML='￦'+0;
				_num.innerHTML=0;
			}
		}
		
		for(var i=0;i<check.length;i++){
			check[i].onclick=function(){
				var arr=[];
				var jud=true;
				for(var k=0;k<check.length;k++){
					if(!check[k].checked){
						arr.push(k);
						jud=false;
					}
				}
				var sum1=0;
				var sum2=0;
				for(var i=0;i<money1.length;i++){
					var jude=true;
					for(var k=0;k<arr.length;k++){
						if(arr[k]==i){
							jude=false;
						}
					}
					if(jude){
						sum1+=ff(money1[i].innerHTML);
						sum2+=Number(value_num[i].value);
					}
				}
				var inner=ff2(sum1)
				_priceall.innerHTML=inner;
				_num.innerHTML=sum2;
			
				if(jud){
					top_check.checked=true;
					_priceall.innerHTML=money();
					_num.innerHTML=_num2();
				}else{
					top_check.checked=false;
					bottom_check.checked=false;
				}
			}
		}
		
		bottom_check.onclick=function(){
			
			if(bottom_check.checked){
				_priceall.innerHTML=money();
				_num.innerHTML=_num2();
				top_check.checked=false;
				for(var i=0;i<check.length;i++){
					check[i].checked=true;
				}
			}else{
				var jud=true;
				for(var k=0;k<check.length;k++){
					if(!check[k].checked){
						jud=false;
						break;
					}
				}
				if(jud){
					_priceall.innerHTML=money();
					_num.innerHTML=_num2();
					top_check.checked=true;
				}
			}
		}
		
		//数量相加
		function _num2(){
			var _arr=[];
			var _sum=0;
			for(var i=0;i<check.length;i++){
				if(check[i].checked){
					_arr.push(i);
				}
			}
			for(var k=0;k<_arr.length;k++){
				_sum+=Number(value_num[_arr[k]].value);
			}
			return _sum;
		}
		
		
		//总价相加
		function money(){
			var _arr=[];
			var _sum=0;
			for(var i=0;i<check.length;i++){
				if(check[i].checked){
					_arr.push(i);
				}
			}
			for(var k=0;k<_arr.length;k++){
				_sum+=ff(money1[_arr[k]].innerHTML);
			}
			_sum=ff2(_sum);
			return _sum;
		}
		

			
			
//		}
		//删除商品
		for(var i=0;i<move.length;i++){
			move[i].onclick=function(){
				var question=confirm("确认删除该商品？");
				if(question){
					this.parentNode.parentNode.remove();
					var xid=this.parentNode.parentNode.getAttribute("data-id").split(" ");
					var id=xid[0];
					var _attr=xid[1];
					for(var k=0;k<arr.length;k++){
						if(arr[k].id==id && arr[k].atr==_attr){
							arr.splice(k,1);
						}
					}
					document.cookie="init="+JSON.stringify(arr);
					_priceall.innerHTML=money();
					_num.innerHTML=_num2();
				}
				
				
			}
		}
		
		//cookie记录所有商品的信息
		function cook(){
			for(var i=0;i<_list.length;i++){
				arr[i].money1=money1[i].innerHTML;
				arr[i].money2=money2[i].innerHTML;
				arr[i].num=value_num[i].value;
			}
		}
		
//		改变INPUT的值改变商品价格
		for(var i=0;i<_inpx.length;i++){
			_inpx[i].index=i;
			_inpx[i].onblur=function(){
				var n=Number(this.value);			
				var m1=this.parentNode.nextElementSibling.children[0].innerHTML;
				var y2=this.parentNode.nextElementSibling.children[2].innerHTML;
				var m2=(parseFloat(y2.slice(2))*n).toFixed(2)
				money1[this.index].innerHTML="￦"+pricei(m1,n);
				money2[this.index].innerHTML='('+'￥'+m2+')';
				cook();
				document.cookie="init="+JSON.stringify(arr);
				if(this.parentNode.previousElementSibling.children[0].checked){
					_priceall.innerHTML=money();
					_num.innerHTML=_num2();
				}
			}
		}
		
			
		maxbox.onclick=function(e){
			var e=e||event;
			var target=e.target||e.srcElement;
			if(target.tagName=="BUTTON" &&target.className=="top_btn"){
				target.parentNode.previousElementSibling.value++;
				
//				var xid=target.parentNode.parentNode.parentNode.getAttribute("data-id").split(" ");
//				var id=xid[0];
//				var _attr=xid[1];
				
				var value=target.parentNode.previousElementSibling.value;
				var _price1=target.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.children[0];
				var _price2=target.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.children[2];
				var _pri1=target.parentNode.parentNode.nextElementSibling.children[0];
				var _pri2=target.parentNode.parentNode.nextElementSibling.children[2];
				var p1=parseFloat(_pri2.innerHTML.slice(2));
				_price1.innerHTML="￦"+pricei(_pri1.innerHTML,value);
				_price2.innerHTML='('+'￥'+(p1*value).toFixed(2)+')';
				
//				for(var k=0;k<arr.length;k++){
//					if(arr[k].id==id && arr[k].atr==_attr){
//						arr[k].num=value;
//						arr[k].money1=_price1.innerHTML;
//						arr[k].money2=_price2.innerHTML;
//					}
//				}
				cook();
				document.cookie="init="+JSON.stringify(arr);
				if(target.parentNode.parentNode.previousElementSibling.children[0].checked){
					_priceall.innerHTML=money();
					_num.innerHTML=_num2();
				}	
			}
			if(target.tagName=="BUTTON" &&target.className=="bottom_btn"){
				if(target.parentNode.previousElementSibling.value>1){
					target.parentNode.previousElementSibling.value--;
//					var xid=target.parentNode.parentNode.parentNode.getAttribute("data-id").split(" ");
//					var id=xid[0];
//					var _attr=xid[1];
					var value=target.parentNode.previousElementSibling.value;
					var _price1=target.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.children[0];
					var _price2=target.parentNode.parentNode.nextElementSibling.nextElementSibling.nextElementSibling.children[2];
					var _pri1=target.parentNode.parentNode.nextElementSibling.children[0];
					var _pri2=target.parentNode.parentNode.nextElementSibling.children[2];
					var p1=parseFloat(_pri2.innerHTML.slice(2));
					_price1.innerHTML="￦"+pricei(_pri1.innerHTML,value);
					_price2.innerHTML='('+'￥'+(p1*value).toFixed(2)+')';
//					for(var k=0;k<arr.length;k++){
//						if(arr[k].id==id && arr[k].atr==_attr){
//							arr[k].num=value;
//							arr[k].money1=_price1.innerHTML;
//							arr[k].money2=_price2.innerHTML;
//						}
//					}
					cook();
					document.cookie="init="+JSON.stringify(arr);
					if(target.parentNode.parentNode.previousElementSibling.children[0].checked){
						_priceall.innerHTML=money();
						_num.innerHTML=_num2();
					}
				}
				
			}
		}
		document.cookie="init="+JSON.stringify(arr);
		

//		var all1=maxbox.getElementsByClassName("all")[0].getElementsByTagName("span")[0];
//		var all2=maxbox.getElementsByClassName("all")[0].getElementsByTagName("span")[1];
//		var inp=maxbox.getElementsByClassName("number")[0].getElementsByClassName("int")[0];
//		var price1=maxbox.getElementsByClassName("price")[0].getElementsByTagName("span")[0];
//		var price2=maxbox.getElementsByClassName("price")[0].getElementsByTagName("span")[1];
		
		

	})
</script>



